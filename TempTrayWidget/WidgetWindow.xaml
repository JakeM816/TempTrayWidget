<Window x:Class="TempTrayWidget.WidgetWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:lvc="clr-namespace:LiveChartsCore.SkiaSharpView.WPF;assembly=LiveChartsCore.SkiaSharpView.WPF"
        xmlns:shell="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        Loaded="Window_Loaded"
        WindowStyle="None"
        ResizeMode="CanResize"
        AllowsTransparency="False"
        Background="#0B0B0D"
        Topmost="True"
        ShowInTaskbar="False"
        MinWidth="520" MinHeight="520"
        Width="900" Height="700">
<shell:WindowChrome.WindowChrome>
  <shell:WindowChrome
      CaptionHeight="0"
      CornerRadius="6"
      GlassFrameThickness="0"
      NonClientFrameEdges="None"
      ResizeBorderThickness="8"/>
</shell:WindowChrome.WindowChrome>


    <Border CornerRadius="8" Background="#101115" BorderBrush="#1F6FEB" BorderThickness="1">
        <Grid Margin="10">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>

            <!-- Title bar -->
            <Border Grid.Row="0" Background="#121826" MouseDown="TitleBar_MouseDown" CornerRadius="8,8,0,0">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition/>
                        <ColumnDefinition Width="30"/>
                        <ColumnDefinition Width="30"/>
                    </Grid.ColumnDefinitions>
                    <TextBlock Text="System Monitor" VerticalAlignment="Center" Margin="8,0,0,0"
                   Foreground="#E6F0FF" FontSize="13" FontWeight="SemiBold"/>
                    <Button Grid.Column="1" Click="MinimizeButton_Click" Background="Transparent"
                BorderThickness="0" Padding="0" ToolTip="Minimize">
                        <TextBlock Text="—" FontSize="14" Foreground="#E6F0FF" HorizontalAlignment="Center"/>
                    </Button>
                    <Button Grid.Column="2" Click="CloseButton_Click" Background="Transparent"
                BorderThickness="0" Padding="0" ToolTip="Close">
                        <TextBlock Text="✕" FontSize="12" Foreground="#E6F0FF" HorizontalAlignment="Center"/>
                    </Button>
                </Grid>
            </Border>

            <!-- Header stats -->
            <StackPanel Grid.Row="1" Margin="10,8,10,0" Orientation="Vertical">
                <TextBlock x:Name="CpuText" Foreground="#BFD8FF" FontSize="14" Margin="0,0,0,4"/>
                <TextBlock x:Name="GpuText" Foreground="#BFD8FF" FontSize="14" Margin="0,0,0,4"/>
                <TextBlock x:Name="CpuLoadText" Foreground="#BFD8FF" FontSize="14" Margin="0,0,0,4"/>
                <TextBlock x:Name="GpuLoadText" Foreground="#BFD8FF" FontSize="14"/>
            </StackPanel>

            <!-- Content with splitters -->
            <Grid Grid.Row="2" Margin="10,8,10,10">
                <Grid.RowDefinitions>
                    <RowDefinition Height="2*"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="2*"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>

                <!-- CPU Total (always visible) -->
                <Border Grid.Row="0" Background="#0F1525" CornerRadius="6" Padding="8">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="*"/>
                        </Grid.RowDefinitions>
                        <TextBlock Text="CPU — Total" Foreground="#E6F0FF" FontSize="12" Margin="0,0,0,6"/>
                        <lvc:CartesianChart x:Name="CpuTotalChart"
                              Grid.Row="1"
                              Background="#0F1525"
                              LegendPosition="Hidden"
                              MinHeight="120"/>
                    </Grid>
                </Border>

                <!-- Splitter -->
                <GridSplitter Grid.Row="1" Height="6" HorizontalAlignment="Stretch" Background="#1F6FEB" Opacity="0.35"/>

                <!-- GPU Total (always visible) -->
                <Border Grid.Row="2" Background="#0F1525" CornerRadius="6" Padding="8">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="*"/>
                        </Grid.RowDefinitions>
                        <TextBlock Text="GPU — Total" Foreground="#E6F0FF" FontSize="12" Margin="0,0,0,6"/>
                        <lvc:CartesianChart x:Name="GpuTotalChart"
                              Grid.Row="1"
                              Background="#0F1525"
                              LegendPosition="Hidden"
                              MinHeight="120"/>
                    </Grid>
                </Border>

                <!-- Splitter -->
                <GridSplitter Grid.Row="3" Height="6" HorizontalAlignment="Stretch" Background="#1F6FEB" Opacity="0.35"/>

                <!-- Expanders area -->
                <Grid Grid.Row="4">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>

                    <!-- CPU per-core tiles -->
                    <Expander Grid.Row="0"
                  Header="CPU — Per-Core"
                  IsExpanded="True"
                  Foreground="#E6F0FF"
                  FontSize="12">
                        <ScrollViewer VerticalScrollBarVisibility="Auto">
                            <UniformGrid x:Name="PerCoreGridCpu" Rows="0" Columns="2" Margin="0"/>
                        </ScrollViewer>
                    </Expander>

                    <GridSplitter Grid.Row="1" Height="6" HorizontalAlignment="Stretch" Background="#1F6FEB" Opacity="0.35"/>

                    <!-- GPU tiles -->
                    <Expander Grid.Row="2"
                  Header="GPU — Engines / Adapters"
                  IsExpanded="False"
                  Foreground="#E6F0FF"
                  FontSize="12">
                        <ScrollViewer VerticalScrollBarVisibility="Auto">
                            <UniformGrid x:Name="PerCoreGridGpu" Rows="0" Columns="2" Margin="0"/>
                        </ScrollViewer>
                    </Expander>
                </Grid>
            </Grid>
        </Grid>
    </Border>
</Window>